var Parsimmon=function(t){var r=function(t,r,n){return function e(u,a){if(a===n){a=u;u=Object}function i(){var t=this instanceof i?this:new f;t.init.apply(t,arguments);return t}function f(){}i.Bare=f;var s=f[t]=u[t];var o=f[t]=i[t]=i.p=new f;var c;o.constructor=i;i.extend=function(t){return e(i,t)};return(i.open=function(t){if(typeof t==="function"){t=t.call(i,o,s,i,u)}if(typeof t==="object"){for(c in t){if(r.call(t,c)){o[c]=t[c]}}}if(!("init"in o))o.init=u;return i})(a)}}("prototype",{}.hasOwnProperty);var n={};n.Parser=r(function(t,r,e){"use strict";function u(t,r){return{status:true,index:t,value:r,furthest:-1,expected:""}}function a(t,r){return{status:false,index:-1,value:null,furthest:t,expected:r}}function i(t,r){if(!r)return t;if(t.furthest>=r.furthest)return t;return{status:t.status,index:t.index,value:t.value,furthest:r.furthest,expected:r.expected}}function f(t){if(!(t instanceof e))throw new Error("not a parser: "+t)}var s=n.formatError=function(t,r){var n=r.expected;var e=r.index;if(e===t.length){return"expected "+n+", got the end of the string"}var u=e>0?"'...":"'";var a=t.length-e>12?"...'":"'";return"expected "+n+" at character "+e+", got "+u+t.slice(e,e+12)+a};t.init=function(t){this._=t};t.parse=function(t){var r=this.skip(w)._(t,0);return r.status?{status:true,value:r.value}:{status:false,index:r.furthest,expected:r.expected}};t.or=function(t){return z(this,t)};t.then=function(t){if(typeof t==="function"){throw new Error("chaining features of .then are no longer supported")}f(t);return k(this,t).map(function(t){return t[1]})};t.many=function(){var t=this;return e(function(r,n){var e=[];var a;var f;for(;;){a=i(t._(r,n),a);if(a.status){n=a.index;e.push(a.value)}else{return i(u(n,e),a)}}})};t.times=function(t,r){if(arguments.length<2)r=t;var n=this;return e(function(e,a){var f=[];var s=a;var o;var c;for(var v=0;v<t;v+=1){o=n._(e,a);c=i(o,c);if(o.status){a=o.index;f.push(o.value)}else{return c}}for(;v<r;v+=1){o=n._(e,a);c=i(o,c);if(o.status){a=o.index;f.push(o.value)}else{break}}return i(u(a,f),c)})};t.result=function(t){return this.then(v(t))};t.atMost=function(t){return this.times(0,t)};t.atLeast=function(t){var r=this;return k(this.times(t),this.many()).map(function(t){return t[0].concat(t[1])})};t.map=function(t){var r=this;return e(function(n,e){var a=r._(n,e);if(!a.status)return a;return i(u(a.index,t(a.value)),a)})};t.skip=function(t){return k(this,t).map(function(t){return t[0]})};t.mark=function(){return k(O,this,O).map(function(t){return{start:t[0],value:t[1],end:t[2]}})};var o=n.string=function(t){var r=t.length;var n="'"+t+"'";return e(function(e,i){var f=e.slice(i,i+r);if(f===t){return u(i+r,f)}else{return a(i,n)}})};var c=n.regex=function(t){var r=RegExp("^(?:"+t.source+")",(""+t).slice((""+t).lastIndexOf("/")+1));return e(function(n,e){var i=r.exec(n.slice(e));if(i){var f=i[0];return u(e+f.length,f)}else{return a(e,t)}})};var v=n.succeed=function(t){return e(function(r,n){return u(n,t)})};var l=n.fail=function(t){return e(function(r,n){return a(n,t)})};var h=n.letter=c(/[a-z]/i);var p=n.letters=c(/[a-z]*/i);var d=n.digit=c(/[0-9]/);var x=n.digits=c(/[0-9]*/);var g=n.whitespace=c(/\s+/);var m=n.optWhitespace=c(/\s*/);var y=n.any=e(function(t,r){if(r>=t.length)return a(r,"any character");return u(r+1,t.charAt(r))});var _=n.all=e(function(t,r){return u(t.length,t.slice(r))});var w=n.eof=e(function(t,r){if(r<t.length)return a(r,"EOF");return u(r,null)});var E=n.lazy=function(t){var r=e(function(n,e){r._=t()._;return r._(n,e)});return r};var k=n.seq=function(){var t=[].slice.call(arguments);var r=t.length;return e(function(n,e){var a;var f=new Array(r);for(var s=0;s<r;s+=1){a=i(t[s]._(n,e),a);if(!a.status)return a;f[s]=a.value;e=a.index}return i(u(e,f),a)})};var z=n.alt=function(){var t=[].slice.call(arguments);var r=t.length;if(r===0)return l("zero alternates");return e(function(r,n){var e;for(var u=0;u<t.length;u+=1){e=i(t[u]._(r,n),e);if(e.status)return e}return e})};var O=n.index=e(function(t,r){return u(r,r)});t.concat=t.or;t.empty=l("empty");t.of=e.of=n.of=v;t.ap=function(t){return k(this,t).map(function(t){return t[0](t[1])})};t.chain=function(t){var r=this;return e(function(n,e){var u=r._(n,e);if(!u.status)return u;var a=t(u.value);return i(a._(n,u.index),u)})}});return n}();